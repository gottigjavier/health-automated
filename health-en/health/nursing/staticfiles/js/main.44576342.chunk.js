(this["webpackJsonpnursing-react"]=this["webpackJsonpnursing-react"]||[]).push([[0],[,,,,,,function(e,t,c){},,,function(e,t,c){},function(e,t,c){},,,,,,function(e,t,c){},,function(e,t,c){},function(e,t,c){},,function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},,function(e,t,c){},function(e,t,c){},function(e,t,c){"use strict";c.r(t);var a=c(1),s=c.n(a),n=c(11),l=c.n(n),i=c(2),r=(c(9),Object(a.createContext)([{},function(){}])),o=(c(16),c(3)),d=c.n(o),j=c(4),b=function(){var e=Object(j.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"http://localhost:8000/nursing/initial_load",e.next=3,fetch("http://localhost:8000/nursing/initial_load",{headers:{"Access-Control-Allow-Origin":"*",crossorigin:"anonymous","Cache-Control":"no-cache"}});case 3:return t=e.sent,e.next=6,t.json();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();c(18),c(19),c(6);function u(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"d-m-y",c=arguments.length>1?arguments[1]:void 0,a=c||new Date;if("object"===typeof a){var s=a.getFullYear(),n=a.getMonth()+1;n>12&&(n=1);var l=O(n),i=a.getDate(),r=O(i),o=a.getHours(),d=O(o),j=a.getMinutes(),b=O(j),u=a.getSeconds(),m=O(u);e="d-m-y"===t?r+"-"+l+"-"+s+" "+d+":"+b+":"+m:"y-m-d"===t?s+"-"+l+"-"+r+" "+d+":"+b+":"+m:"d/m/y"===t?r+"/"+l+"/"+s+" "+d+":"+b+":"+m:"y/m/d"===t?s+"/"+l+"/"+r+" "+d+":"+b+":"+m:a.toLocaleString()}else"string"===typeof a&&(e="y-m-d"===t?p(a):"d-m-y"===t?x(a):a);return e}function m(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"d-m-y",c=arguments.length>1?arguments[1]:void 0,a=c||new Date;if("object"===typeof a){var s=a.getFullYear(),n=a.getMonth()+1;n>12&&(n=1);var l=O(n),i=a.getDate(),r=O(i);if("d-m-y"===t)e=r+"-"+l+"-"+s;else if("y-m-d"===t)e=s+"-"+l+"-"+r;else if("d/m/y"===t)e=r+"/"+l+"/"+s;else if("y/m/d"===t)e=s+"/"+l+"/"+r;else if("d-m-y:short"===t){var o=s.slice(2);e=r+"-"+l+"-"+o}else if("y-m-d:short"===t){var d=s.slice(2);e=d+"-"+l+"-"+r}else if("d/m/y:short"===t){var j=s.slice(2);e=r+"/"+l+"/"+j}else if("y/m/d:short"===t){var b=s.slice(2);e=b+"/"+l+"/"+r}else e=a.toLocaleString().split[0]}if("string"===typeof a)if("y-m-d"===t)e=p(a).split(" ")[0];else if("d-m-y"===t)e=x(a).split(" ")[0];else if("y-m-d:short"===t){var u=p(a).split(" ")[0];e=u.slice(5)}else if("d-m-y:short"===t){var m=x(a).split(" ")[0];e=m.slice(0,5)}else e=a;return e}function h(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"h:m:s",c=arguments.length>1?arguments[1]:void 0,a=c||new Date;if("object"===typeof a){var s=a.getHours(),n=O(s),l=a.getMinutes(),i=O(l),r=a.getSeconds(),o=O(r);"h:m:s"===t?e=n+":"+i+":"+o:"h:m"===t&&(e=n+":"+i)}else if("string"===typeof a)if("h:m:s"===t)e=p(a).split(" ")[1];else if("h:m"===t){var d=p(a).split(" ")[1],j=d.split(":")[0],b=d.split(":")[1];e=j+":"+b}else e=a;return e}function O(e){var t=e.toString();return t.length<2&&(t="0"+t),t}function x(e){var t=e.toLocaleString(),c=function(){try{return{date:t.split("T")[0].split("-").reverse().join("-"),time:t.split("T")[1].split(".")[0]}}catch(e){return{date:t.split(" ")[0],time:t.split(" ")[1]}}};return"".concat(c().date," ").concat(c().time)}function p(e){var t=e.toLocaleString(),c=function(){try{return{date:t.split("T")[0].split("-").join("-"),time:t.split("T")[1].split(".")[0]}}catch(e){return{date:t.split(" ")[0],time:t.split(" ")[1]}}};return"".concat(c().date," ").concat(c().time)}var v=c(0);function f(e){var t=e.currentBed,c="free"===t.bed_state?"Free":"Occupied",a=u("d-m-y",t.bed_occupied_time),s=t.bed_planed_vacate?u("d-m-y",t.bed_planed_vacate):"Undetermined";return Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)("div",{className:"container",children:[Object(v.jsx)("div",{className:"row justify-content-center info-modal-title shdw",children:Object(v.jsx)("p",{id:"info-modal-title",className:"text-center",children:Object(v.jsx)("b",{children:"Bed Information"})})}),Object(v.jsxs)("div",{className:"row shdw",children:[Object(v.jsx)("div",{className:"col",children:Object(v.jsxs)("p",{className:"col text-center mt-3 modal-subtitle",children:["Room: ",Object(v.jsx)("span",{className:"p-styled1",children:t.bed_id.split(",")[0]})]})}),Object(v.jsx)("div",{className:"col",children:Object(v.jsxs)("p",{className:"col text-center mt-3 modal-subtitle",children:["Bed: ",Object(v.jsx)("span",{className:"p-styled1",children:t.bed_id.split(",")[1]})]})})]}),Object(v.jsxs)("div",{className:"row shdw",children:[Object(v.jsxs)("div",{className:"col-md-8 col-sm-8",children:[Object(v.jsx)("p",{className:"modal-subtitle",children:"Patient"}),Object(v.jsx)("p",{className:"p-styled1",children:t.patient})]}),Object(v.jsxs)("div",{className:"col-md-2 col-sm-4",children:[Object(v.jsx)("p",{className:"modal-subtitle",children:"State"}),Object(v.jsx)("p",{className:"p-styled1",children:c})]})]}),Object(v.jsxs)("div",{className:"row justify-content-center shdw pb-3",children:[Object(v.jsx)("p",{className:"modal-subtitle",children:"Diagnosis"}),Object(v.jsx)("p",{className:"border border-info text-box",children:t.diagnosis})]}),Object(v.jsxs)("div",{className:"row shdw pb-3",children:[t.bed_active&&Object(v.jsxs)("div",{className:"col justify-content-center",children:[Object(v.jsx)("p",{className:"modal-subtitle",children:"Occupied on"}),Object(v.jsx)("p",{className:"p-styled1 text-center",children:a})]}),t.bed_active&&Object(v.jsxs)("div",{className:"col justify-content-center",children:[Object(v.jsx)("p",{className:"modal-subtitle",children:"Planned to Vacated on"}),Object(v.jsx)("p",{className:"p-styled1 text-center",children:s})]})]})]})})}c(21);function N(e){var t=e.alertShow,c=e.hiddeAlertShow,a=e.alertMessage,s=t?"modal display-block":"display-none";return Object(v.jsx)(v.Fragment,{children:Object(v.jsx)("div",{className:s,children:Object(v.jsx)("section",{className:"modal-alert",children:Object(v.jsxs)("div",{className:"container",children:[Object(v.jsx)("p",{className:"alert-modal-title text-center shdw",children:Object(v.jsx)("b",{children:"Warning!"})}),Object(v.jsx)("hr",{}),Object(v.jsx)("p",{className:"alert-modal-subtitle text-center",children:a}),Object(v.jsx)("div",{className:"d-flex justify-content-end",children:Object(v.jsx)("button",{onClick:c,type:"button",id:"task-alert",className:"shdw btn m-1",title:"Close",children:"Close"})})]})})})})}function g(e){var t=e.currentBed,c=e.handleShowInfo,s=Object(a.useContext)(r),n=Object(i.a)(s,2),l=(n[0],n[1]),o=(t.bed_state,Object(a.useState)()),d=Object(i.a)(o,2),j=d[0],b=d[1],u=Object(a.useState)(),O=Object(i.a)(u,2),x=O[0],p=O[1],f=Object(a.useState)(),g=Object(i.a)(f,2),y=g[0],w=g[1],k=Object(a.useState)(),S=Object(i.a)(k,2),C=S[0],D=S[1],_=Object(a.useState)(t.patient),B=Object(i.a)(_,2),A=B[0],R=B[1],T=Object(a.useState)(t.patient_security_number),I=Object(i.a)(T,2),E=I[0],P=I[1],F=Object(a.useState)(t.diagnosis),M=Object(i.a)(F,2),J=M[0],L=M[1],U=Object(a.useState)(),V=Object(i.a)(U,2),W=V[0],H=V[1],Y=Object(a.useState)(!1),q=Object(i.a)(Y,2),z=q[0],G=q[1],K=Object(a.useState)(""),Q=Object(i.a)(K,2),X=Q[0],Z=Q[1];Object(a.useEffect)((function(){b(m("y-m-d",t.bed_occupied_time)),p(h("h:m",t.bed_occupied_time)),w(t.bed_planed_vacate?m("y-m-d",t.bed_planed_vacate):"0000-00-00"),D(t.bed_planed_vacate?h("h:m",t.bed_planed_vacate):"0000-00-00"),H(t.action_done_by)}),[]);var $=function(){G(!0)};return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("div",{className:"container",children:[Object(v.jsx)("div",{className:"row justify-content-center info-modal-title shdw",children:Object(v.jsx)("h3",{id:"info-modal-title",className:"text-center",children:Object(v.jsx)("b",{children:"Edit Bed"})})}),Object(v.jsxs)("div",{className:"row shdw",children:[Object(v.jsx)("div",{className:"col",children:Object(v.jsxs)("p",{className:"col text-center mt-3 modal-subtitle",children:["Room: ",Object(v.jsx)("span",{className:"p-styled1",children:t.bed_id.split(",")[0]})]})}),Object(v.jsx)("div",{className:"col",children:Object(v.jsxs)("p",{className:"col text-center mt-3 modal-subtitle",children:["Bed: ",Object(v.jsx)("span",{className:"p-styled1",children:t.bed_id.split(",")[1]})]})})]})]}),Object(v.jsx)("div",{className:"container shdw",children:Object(v.jsx)("form",{id:"edit-bed",onSubmit:function(e){var a=j+" "+x,s=y+" "+C,n=new Date;if(Date.parse(a)>Date.parse(n))return Z("If bed is already occupied, you cannot occupy it in the future unless you vacate it first."),e.preventDefault(),$();if(Date.parse(s)<Date.parse(n))return Z('Past time. To vacate the bed, do it from the "Vacate bed" tab.'),e.preventDefault(),$();var i=t.id;fetch("http://localhost:8000/nursing/edit_bed",{method:"PUT",headers:{"Access-Control-Allow-Origin":"*",crossorigin:"anonymous","Cache-Control":"no-cache"},body:JSON.stringify({bedId:i,patientName:A,patientSocial:E,diagnosis:J,occupiedDateTime:a,planedVacate:s,doneBy:W})}).then((function(e){return e.json()})).then((function(e){l(e)})).catch((function(e){console.log("An ERROR occurred while save the Edtited Bed, ".concat(e))})),c(),e.preventDefault()},children:Object(v.jsxs)("div",{className:"container",children:[Object(v.jsxs)("div",{className:"row",children:[Object(v.jsx)("div",{className:"col-2"}),Object(v.jsx)("div",{className:"col-8 modal-subtitle-center my-2",children:"Patient"}),Object(v.jsx)("div",{className:"col-2"})]}),Object(v.jsxs)("div",{className:"row justify-content-center",children:[Object(v.jsxs)("div",{className:"col justify-content-center",children:[Object(v.jsx)("label",{className:"text-box mb-0",children:"Name"}),Object(v.jsx)("input",{className:"input-box-center text-center",type:"text",id:"patient-name",name:"patient-name",placeholder:A,value:A,onChange:function(e){return R(e.target.value)}})]}),Object(v.jsxs)("div",{className:"col justify-content-center",children:[Object(v.jsx)("label",{className:"text-box mb-0",children:"Social Security Number"}),Object(v.jsx)("input",{className:"input-box-center text-center",type:"text",id:"patient-social",name:"patient-social",title:"Social Security Number",placeholder:E,value:E,onChange:function(e){return P(e.target.value)}})]})]}),Object(v.jsxs)("div",{className:"row",children:[Object(v.jsx)("div",{className:"col-2"}),Object(v.jsx)("div",{className:"col-8 modal-subtitle-center mb-2 mt-4",children:"Diagnosis"}),Object(v.jsx)("div",{className:"col-2"})]}),Object(v.jsx)("div",{className:"row justify-content-center",children:Object(v.jsx)("textarea",{id:"diagnosis-info",name:"diagnosis-info",className:"text-box mb-3",placeholder:J,value:J,onChange:function(e){return L(e.target.value)}})}),Object(v.jsxs)("div",{className:"row",children:[Object(v.jsxs)("div",{id:"occupied",className:"col time-box shdw mx-1",children:[Object(v.jsx)("p",{className:"text-center modal-subtitle",children:"Occupied On"}),Object(v.jsx)("input",{type:"date",id:"occupied-date",name:"occupied-date",className:"d-box",onChange:function(e){return b(e.target.value)},value:j}),Object(v.jsx)("input",{type:"time",id:"occupied-time",name:"occupied-time",className:"tm-box",onChange:function(e){return p(e.target.value)},value:x})]}),Object(v.jsxs)("div",{id:"vacate",className:"col time-box shdw mx-1",children:[Object(v.jsx)("p",{className:"text-center modal-subtitle",children:"Planed Vacate"}),Object(v.jsx)("input",{type:"date",id:"vacate-date",name:"vacate-date",className:"d-box",onChange:function(e){return w(e.target.value)},value:y}),Object(v.jsx)("input",{type:"time",id:"vacate-time",name:"vacate-time",className:"tm-box",onChange:function(e){return D(e.target.value)},value:C})]})]}),Object(v.jsxs)("div",{className:"row my-4 mx-0",children:[Object(v.jsx)("div",{className:"col-4"}),Object(v.jsxs)("div",{className:"col-8 d-flex justify-content-end",children:[Object(v.jsx)("label",{className:"done-label",children:"Done By"}),Object(v.jsx)("input",{type:"text",id:"done-by",name:"done-by",className:"done-box",onChange:function(e){return H(e.target.value)},value:W,placeholder:W})]})]}),Object(v.jsx)("div",{className:"row justify-content-end",children:Object(v.jsx)("input",{type:"submit",value:"Save",id:"edit-bed-send",className:"btn save shdw m-2 px-2 py-1 float-right",title:"Send"})})]})})}),z&&Object(v.jsx)(N,{alertShow:z,hiddeAlertShow:function(){G(!1)},alertMessage:X})]})}function y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30,c=e.getMinutes()+t;e.setMinutes(c);return e}function w(e){var t=e.currentBed,c=e.handleShowInfo,s=Object(a.useContext)(r),n=Object(i.a)(s,2),l=(n[0],n[1]),o=Object(a.useState)(""),d=Object(i.a)(o,2),j=d[0],b=d[1],u=Object(a.useState)(""),O=Object(i.a)(u,2),x=O[0],p=O[1],f=Object(a.useState)(m("y-m-d",new Date)),g=Object(i.a)(f,2),y=g[0],w=g[1],k=Object(a.useState)(h("h:m",new Date)),S=Object(i.a)(k,2),C=S[0],D=S[1],_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:7,c=e.getDate()+t;return e.setDate(c),e}(new Date,7),B=Object(a.useState)(m("y-m-d",_)),A=Object(i.a)(B,2),R=A[0],T=A[1],I=Object(a.useState)(h("h:m",_)),E=Object(i.a)(I,2),P=E[0],F=E[1],M=Object(a.useState)(""),J=Object(i.a)(M,2),L=J[0],U=J[1],V=Object(a.useState)(""),W=Object(i.a)(V,2),H=W[0],Y=W[1],q=Object(a.useState)(!1),z=Object(i.a)(q,2),G=z[0],K=z[1],Q=Object(a.useState)(""),X=Object(i.a)(Q,2),Z=X[0],$=X[1],ee=function(){K(!0)};return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("div",{className:"container",children:[Object(v.jsx)("div",{className:"row justify-content-center info-modal-title shdw",children:Object(v.jsx)("h3",{id:"info-modal-title",className:"text-center text-title",children:Object(v.jsx)("b",{children:"Occupy Bed"})})}),Object(v.jsxs)("div",{className:"row shdw",children:[Object(v.jsx)("div",{className:"col",children:Object(v.jsxs)("p",{className:"col text-center mt-3",children:["Room: ",Object(v.jsx)("span",{className:"modal-subtitle",children:t.bed_id.split(",")[0]})]})}),Object(v.jsx)("div",{className:"col",children:Object(v.jsxs)("p",{className:"col text-center mt-3",children:["Bed: ",Object(v.jsx)("span",{className:"modal-subtitle",children:t.bed_id.split(",")[1]})]})})]})]}),Object(v.jsx)("div",{className:"container shdw",children:Object(v.jsxs)("form",{id:"occupy-form",onSubmit:function(e){var a=y+" "+C,s=R+" "+P,n=new Date;if(Date.parse(s)<Date.parse(a))return $("A bed cannot be declared vacant before it is occupied."),e.preventDefault(),ee();if(Date.parse(s)<Date.parse(n))return $("You cannot plan to vacate a bed in the past tense while trying to occupy it."),e.preventDefault(),ee();var i=t.bed_id;fetch("http://localhost:8000/nursing/occupy_bed",{method:"POST",headers:{"Access-Control-Allow-Origin":"*",crossorigin:"anonymous","Cache-Control":"no-cache"},body:JSON.stringify({roomBedId:i,patientName:j,patientSocial:x,diagnosis:L,occupiedDateTime:a,planedVacate:s,doneBy:H})}).then((function(e){return e.json()})).then((function(e){l(e)})).catch((function(e){console.log("An ERROR occurred while save Occupy Bed, ".concat(e))})),c()},children:[Object(v.jsxs)("div",{className:"container",children:[Object(v.jsxs)("div",{className:"row",children:[Object(v.jsx)("div",{className:"col-2"}),Object(v.jsx)("div",{className:"col-8 modal-subtitle-center my-2",children:"Patient"}),Object(v.jsx)("div",{className:"col-2"})]}),Object(v.jsxs)("div",{className:"row justify-content-center",children:[Object(v.jsx)("div",{className:"col justify-content-center",children:Object(v.jsx)("input",{className:"input-box-center text-center",type:"text",id:"patient-name",name:"patient-name",placeholder:"Patient Name",value:j,onChange:function(e){return b(e.target.value)}})}),Object(v.jsx)("div",{className:"col justify-content-center",children:Object(v.jsx)("input",{className:"input-box-center text-center",type:"text",id:"patient-social",name:"patient-social",placeholder:"Social Security Number",value:x,onChange:function(e){return p(e.target.value)}})})]}),Object(v.jsxs)("div",{className:"row",children:[Object(v.jsx)("div",{className:"col-2"}),Object(v.jsx)("div",{className:"col-8 modal-subtitle-center mb-2 mt-4",children:"Diagnosis"}),Object(v.jsx)("div",{className:"col-2"})]}),Object(v.jsx)("div",{className:"row justify-content-center",children:Object(v.jsx)("textarea",{id:"diagnosis-info",name:"diagnosis-info",className:"text-box mb-3",placeholder:"Enter Short Diagnosis",value:L,onChange:function(e){return U(e.target.value)}})})]}),Object(v.jsxs)("div",{className:"container",children:[Object(v.jsxs)("div",{className:"row",children:[Object(v.jsx)("div",{className:"col-2"}),Object(v.jsx)("div",{className:"col-8 modal-subtitle-center my-2",children:"Bed"}),Object(v.jsx)("div",{className:"col-2"})]}),Object(v.jsxs)("div",{className:"row",children:[Object(v.jsxs)("div",{id:"occupied",className:"col time-box shdw",children:[Object(v.jsx)("p",{className:"text-center modal-subtitle",children:"Occupied On"}),Object(v.jsx)("input",{type:"date",id:"occupied-date",name:"occupied-date",className:"mb-1",onChange:function(e){return w(e.target.value)},value:y}),Object(v.jsx)("input",{type:"time",id:"occupied-time",name:"occupied-time",className:"mb-1",onChange:function(e){return D(e.target.value)},value:C})]}),Object(v.jsxs)("div",{id:"vacate",className:"col time-box shdw",children:[Object(v.jsx)("p",{className:"text-center modal-subtitle",children:"Planed Vacate"}),Object(v.jsx)("input",{type:"date",id:"vacate-date",name:"vacate-date",className:"mb-1",onChange:function(e){return T(e.target.value)},value:R}),Object(v.jsx)("input",{type:"time",id:"vacate-time",name:"vacate-time",className:"mb-1",onChange:function(e){return F(e.target.value)},value:P})]})]}),Object(v.jsxs)("div",{className:"row justify-content-end",children:[Object(v.jsx)("p",{className:"justify-content-end info-label mt-3",children:"Done By"})," ",Object(v.jsx)("br",{}),Object(v.jsx)("input",{type:"text",id:"done-by",name:"done-by",className:"justify-content-end my-3 mx-2",onChange:function(e){return Y(e.target.value)},value:H,placeholder:"Anonymous"})]})]}),Object(v.jsx)("div",{className:"justify-content-end",children:Object(v.jsx)("input",{type:"submit",value:"Save",id:"edit-bed-send",className:"btn shdw m-2 px-2 py-1 float-right",title:"Send"})})]})}),G&&Object(v.jsx)(N,{alertShow:G,hiddeAlertShow:function(){K(!1)},alertMessage:Z})]})}function k(e){var t=e.currentBed,c=e.hideBedModal,s=Object(a.useContext)(r),n=Object(i.a)(s,2),l=(n[0],n[1]),o=Object(a.useState)("free"===t.bed_state?"Free":"Occupied"),d=Object(i.a)(o,2),j=d[0],b=d[1],O=u("d-m-y",t.bed_occupied_time),x=t.bed_planed_vacate?u("d-m-y",t.bed_planed_vacate):"Undetermined",p=Object(a.useState)(m("y-m-d",new Date)),f=Object(i.a)(p,2),g=f[0],y=f[1],w=Object(a.useState)(h("h:m",new Date)),k=Object(i.a)(w,2),S=k[0],C=k[1],D=Object(a.useState)("Anonymous"),_=Object(i.a)(D,2),B=_[0],A=_[1],R=Object(a.useState)(!1),T=Object(i.a)(R,2),I=T[0],E=T[1],P=Object(a.useState)(""),F=Object(i.a)(P,2),M=F[0],J=F[1];return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("div",{className:"container",children:[Object(v.jsx)("div",{className:"row justify-content-center info-modal-title shdw",children:Object(v.jsx)("h3",{id:"info-modal-title",className:"text-center text-title",children:Object(v.jsx)("b",{children:"Vacate Bed"})})}),Object(v.jsxs)("div",{className:"row shdw",children:[Object(v.jsx)("div",{className:"col",children:Object(v.jsxs)("p",{className:"col text-center mt-3 modal-subtitle",children:["Room: ",Object(v.jsx)("span",{className:"p-styled1",children:t.bed_id.split(",")[0]})]})}),Object(v.jsx)("div",{className:"col",children:Object(v.jsxs)("p",{className:"col text-center mt-3 modal-subtitle",children:["Bed: ",Object(v.jsx)("span",{className:"p-styled1",children:t.bed_id.split(",")[1]})]})})]}),Object(v.jsxs)("div",{className:"row shdw",children:[Object(v.jsxs)("div",{className:"col-md-8 col-sm-8",children:[Object(v.jsx)("p",{className:"modal-subtitle",children:"Patient"}),Object(v.jsx)("p",{className:"p-styled1",children:t.patient})]}),Object(v.jsxs)("div",{className:"col-md-2 col-sm-4",children:[Object(v.jsx)("p",{className:"modal-subtitle",children:"State"}),Object(v.jsx)("p",{className:"p-styled1",children:j})]})]}),Object(v.jsxs)("div",{className:"row justify-content-center shdw pb-3",children:[Object(v.jsx)("p",{className:"modal-subtitle",children:"Diagnosis"}),Object(v.jsx)("p",{className:"border border-info text-box",children:t.diagnosis})]}),Object(v.jsxs)("div",{className:"row shdw pb-3",children:[t.bed_active&&Object(v.jsxs)("div",{className:"col justify-content-center",children:[Object(v.jsx)("p",{className:"modal-subtitle",children:"Occupied on"}),Object(v.jsx)("p",{className:"p-styled1 text-center",children:O})]}),t.bed_active&&Object(v.jsxs)("div",{className:"col justify-content-center",children:[Object(v.jsx)("p",{className:"modal-subtitle",children:"Planned to Vacated on"}),Object(v.jsx)("p",{className:"p-styled1 text-center",children:x})]})]}),Object(v.jsx)("form",{id:"edit-bed",onSubmit:function(e){var a=g+" "+S,s=new Date;if(Date.parse(a)>Date.parse(s))return J("A bed cannot be declared vacant if it is not already vacant."),e.preventDefault(),void E(!0);var n=t.id,i=t.patient_id;t.bed_active=!1,t.bed_state="free",t.patient="No Patient",t.diagnosis="No Diagnosis",b("Free"),e.preventDefault(),fetch("http://localhost:8000/nursing/vacate_bed",{method:"POST",headers:{"Access-Control-Allow-Origin":"*",crossorigin:"anonymous","Cache-Control":"no-cache"},body:JSON.stringify({bedId:n,patientId:i,vacateDT:a,doneBy:B})}).then((function(e){return e.json()})).then((function(e){console.log("Vacate bed Result ",e),l(e)})).catch((function(e){console.log("An ERROR occurred while vacate Bed, ".concat(e))})),c()},children:Object(v.jsxs)("div",{className:"container shdw",children:[Object(v.jsxs)("div",{id:"vacate",className:"time-box",children:[Object(v.jsx)("p",{className:"text-center modal-subtitle",children:"Vacate On"}),Object(v.jsxs)("div",{className:"row",children:[Object(v.jsx)("div",{className:"col-2"}),Object(v.jsxs)("div",{className:"col-8 b-center",children:[Object(v.jsx)("input",{type:"date",id:"vacate-date",name:"vacate-date",className:"mb-1",onChange:function(e){return y(e.target.value)},value:g}),Object(v.jsx)("input",{type:"time",id:"vacate-time",name:"vacate-time",className:"mb-1",onChange:function(e){return C(e.target.value)},value:S})]}),Object(v.jsx)("div",{className:"col-2"})]})]}),Object(v.jsxs)("div",{className:"row justify-content-end",children:[Object(v.jsx)("p",{className:"justify-content-end info-label mt-3",children:"Done By"})," ",Object(v.jsx)("br",{}),Object(v.jsx)("input",{type:"text",id:"done-by",name:"done-by",className:"justify-content-end my-3 mx-3",onChange:function(e){return A(e.target.value)},value:B,placeholder:B})]}),Object(v.jsx)("div",{className:"row justify-content-end",children:Object(v.jsx)("input",{type:"submit",value:"Save",id:"edit-bed-send",className:"btn save shdw m-2 px-2 py-1 float-right",title:"Send"})})]})})]}),I&&Object(v.jsx)(N,{alertShow:I,hiddeAlertShow:function(){E(!1)},alertMessage:M})]})}c(10);function S(e){var t=e.currentBed,c=(e.handleShowNewTask,e.hideBedModal),s=t.bed_id.split(",")[0],n=t.bed_id.split(",")[1],l=y(new Date,30),o=y(new Date,150),d=Object(a.useState)(),j=Object(i.a)(d,2),b=j[0],u=j[1],O=Object(a.useState)(),x=Object(i.a)(O,2),p=x[0],f=x[1],g=Object(a.useState)(),w=Object(i.a)(g,2),k=w[0],S=w[1],C=Object(a.useState)(),D=Object(i.a)(C,2),_=D[0],B=D[1],A=Object(a.useState)(""),R=Object(i.a)(A,2),T=R[0],I=R[1],E=Object(a.useState)(),P=Object(i.a)(E,2),F=P[0],M=P[1],J=Object(a.useState)("Anonymous"),L=Object(i.a)(J,2),U=(L[0],L[1]),V=Object(a.useContext)(r),W=Object(i.a)(V,2),H=(W[0],W[1]),Y=Object(a.useState)(!1),q=Object(i.a)(Y,2),z=q[0],G=q[1],K=Object(a.useState)(),Q=Object(i.a)(K,2),X=Q[0],Z=Q[1],$=Object(a.useState)(),ee=Object(i.a)($,2),te=ee[0],ce=ee[1],ae=Object(a.useState)(2),se=Object(i.a)(ae,2),ne=se[0],le=se[1],ie=Object(a.useState)("hours"),re=Object(i.a)(ie,2),oe=re[0],de=re[1],je=Object(a.useState)(!1),be=Object(i.a)(je,2),ue=be[0],me=be[1],he=Object(a.useState)(""),Oe=Object(i.a)(he,2),xe=Oe[0],pe=Oe[1];Object(a.useEffect)((function(){u(m("y-m-d",l)),f(h("h:m",l)),S(m("y-m-d",o)),B(h("h:m",o)),Z(m("y-m-d",t.bed_planed_vacate)),ce(h("h:m",t.bed_planed_vacate))}),[]);var ve=function(){me(!0)};return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("div",{className:"container",children:[Object(v.jsx)("div",{className:"row justify-content-center task-modal-title shdw",children:Object(v.jsx)("h3",{id:"task-modal-title",className:"text-center text-title",children:Object(v.jsx)("b",{children:"New Task"})})}),Object(v.jsxs)("div",{id:"task-place",className:"row shdw",children:[Object(v.jsxs)("p",{className:"modal-subtitle col text-center",children:["Room: ",Object(v.jsx)("b",{children:s})]}),Object(v.jsxs)("p",{className:"modal-subtitle col text-center",children:["Bed: ",Object(v.jsx)("b",{children:n})]})]}),Object(v.jsxs)("div",{children:[Object(v.jsx)("p",{className:"modal-subtitle col text-center",children:"Patient"}),Object(v.jsx)("p",{className:"text-center",children:Object(v.jsx)("b",{children:t.patient})})]})]}),Object(v.jsxs)("div",{className:"container shdw",children:[Object(v.jsxs)("form",{onSubmit:function(e){var a=t.id,s="".concat(b," ").concat(p),n="".concat(k," ").concat(_),l="".concat(X," ").concat(te),i=F||"Anonymous",r=T||"Routine Task",o="soon",d=new Date;return Date.parse(s)<Date.parse(d)?(pe("You are trying to schedule a time that has already passed"),e.preventDefault(),ve()):Date.parse(l)<Date.parse(d)?(pe("You are trying to schedule until an hour that has already passed"),e.preventDefault(),ve()):(Date.parse(s)-Date.parse(d)>6e5&&(o="later"),fetch("http://localhost:8000/nursing/new_task",{method:"POST",headers:{"Access-Control-Allow-Origin":"*",crossorigin:"anonymous","Cache-Control":"no-cache"},body:JSON.stringify({bedId:a,programedDT:s,doneDT:n,programer:i,textAction:r,state:o,repeatIsChecked:z,repeatLapseUnit:oe,repeatUntil:l,repeatLapse:ne})}).then((function(e){return e.json()})).then((function(e){H(e)})).catch((function(e){console.log("An ERROR occurred while save New Task, ".concat(e))})),I(""),c(),void e.preventDefault())},id:"task-form",children:[Object(v.jsxs)("div",{className:"row",children:[Object(v.jsxs)("div",{id:"task-programed-time",className:"col time-box shdw",children:[Object(v.jsx)("p",{className:"text-center modal-subtitle",children:"Schedule"}),Object(v.jsx)("p",{className:"task-label",children:"Programed By "}),Object(v.jsx)("input",{type:"text",id:"programed-by",name:"programed-by",className:"tx-box ml-3 mb-1",onChange:function(e){return M(e.target.value)},value:F,placeholder:"Anonymous"}),Object(v.jsx)("hr",{}),Object(v.jsx)("input",{type:"date",id:"programed-to",name:"programed-to",className:"t-box mb-1",onChange:function(e){return u(e.target.value)},value:b}),Object(v.jsx)("input",{type:"time",id:"programed",name:"programed",className:"t-box mb-1",onChange:function(e){return f(e.target.value)},value:p})]}),Object(v.jsxs)("div",{id:"repeat-task",className:"col time-box shdw",children:[Object(v.jsxs)("div",{className:"text-center modal-subtitle mb-2",children:[Object(v.jsx)("span",{children:"Repeat"}),Object(v.jsx)("input",{type:"checkbox",id:"check-repeat",name:"check-repeat",className:"ml-3 mb-1",onChange:function(e){return G(e.target.checked)},checked:z})]}),Object(v.jsx)("p",{className:"task-label",children:"Every: "}),Object(v.jsx)("input",{type:"number",id:"repeat-count",name:"repeat-count",className:"number-box ml-3 mb-1",onChange:function(e){return le(e.target.value)},value:ne,placeholder:2}),Object(v.jsxs)("select",{onChange:function(e){return de(e.target.value)},value:oe,className:"select-box ml-1 mb-1",children:[Object(v.jsx)("option",{value:"minutes",children:"minutes"}),Object(v.jsx)("option",{value:"hours",children:"hours"}),Object(v.jsx)("option",{value:"days",children:"days"})]}),Object(v.jsx)("hr",{}),Object(v.jsx)("p",{className:"task-label",children:"Until "}),Object(v.jsx)("input",{disabled:!1,type:"date",id:"done",name:"done",className:"t-box",onChange:function(e){return Z(e.target.value)},value:X}),Object(v.jsx)("input",{disabled:!1,type:"time",id:"done",name:"done",className:"t-box ",onChange:function(e){return ce(e.target.value)},value:te})]})]}),Object(v.jsx)("div",{className:"justify-content-center row",children:Object(v.jsxs)("label",{className:"modal-subtitle col text-center",children:[Object(v.jsx)("b",{children:"Action"}),Object(v.jsx)("textarea",{onChange:function(e){return I(e.target.value)},value:T,id:"action-text",className:"text-box shdw",placeholder:"Enter new task",name:"answer-task",maxlength:"1000"})]})}),Object(v.jsx)("div",{id:"task-form-buttons",className:"row",children:Object(v.jsx)("div",{id:"new-edit-buttons",className:"col",children:Object(v.jsx)("input",{type:"submit",value:"Save",id:"task-send",className:"shdw save btn m-2 float-right",title:"Send"})})})]}),Object(v.jsx)("button",{type:"button",id:"task-close",className:"shdw discard btn m-2 float-right",title:"Discard",onClick:function(e){I(""),M(""),U(""),c(),e.preventDefault()},children:"Discard Changes"})]}),ue&&Object(v.jsx)(N,{alertShow:ue,hiddeAlertShow:function(){me(!1)},alertMessage:xe})]})}function C(e){var t=e.show,c=e.hideBedModal,s=e.currentBed,n=t?"modal display-block":"display-none",l=Object(a.useState)(!0),r=Object(i.a)(l,2),o=r[0],d=r[1],j=Object(a.useState)(!1),b=Object(i.a)(j,2),u=b[0],m=b[1],h=Object(a.useState)(!1),O=Object(i.a)(h,2),x=O[0],p=O[1],N=Object(a.useState)(!1),y=Object(i.a)(N,2),C=y[0],D=y[1],_=Object(a.useState)(!1),B=Object(i.a)(_,2),A=B[0],R=B[1],T=s.bed_active?"":"disabled",I=s.bed_active?"disabled":"",E=function(){d((function(e){return!1})),p((function(e){return!1})),D((function(e){return!1})),R((function(e){return!1})),m((function(e){return!0}))},P=function(){m((function(e){return!1})),p((function(e){return!1})),D((function(e){return!1})),R((function(e){return!1})),d((function(e){return!0}))};return Object(v.jsx)(v.Fragment,{children:Object(v.jsx)("div",{className:n,children:Object(v.jsx)("section",{className:"modal-bed",children:Object(v.jsxs)("div",{className:"container",children:[Object(v.jsxs)("ul",{class:"nav nav-tabs",children:[Object(v.jsx)("li",{class:"nav-item",children:Object(v.jsx)("p",{class:"nav-link ".concat(T),onClick:E,children:Object(v.jsx)("p",{className:"bed-modal-subtitle my-0 active-".concat(u),children:"New Task"})})}),Object(v.jsx)("li",{class:"nav-item",children:Object(v.jsx)("p",{class:"nav-link",onClick:P,children:Object(v.jsx)("p",{className:"bed-modal-subtitle my-0 active-".concat(o),children:"Bed Info"})})}),Object(v.jsx)("li",{class:"nav-item",children:Object(v.jsx)("p",{class:"nav-link ".concat(I),onClick:function(){m((function(e){return!1})),d((function(e){return!1})),p((function(e){return!1})),R((function(e){return!1})),D((function(e){return!0}))},children:Object(v.jsx)("p",{className:"bed-modal-subtitle my-0 active-".concat(C),children:"Occupy Bed"})})}),Object(v.jsx)("li",{class:"nav-item",children:Object(v.jsx)("p",{class:"nav-link ".concat(T),onClick:function(){m((function(e){return!1})),d((function(e){return!1})),D((function(e){return!1})),R((function(e){return!1})),p((function(e){return!0}))},children:Object(v.jsx)("p",{className:"bed-modal-subtitle my-0 active-".concat(x),children:"Edit Bed"})})}),Object(v.jsx)("li",{class:"nav-item",children:Object(v.jsx)("p",{class:"nav-link ".concat(T),onClick:function(){m((function(e){return!1})),d((function(e){return!1})),p((function(e){return!1})),D((function(e){return!1})),R((function(e){return!0}))},children:Object(v.jsx)("p",{className:"bed-modal-subtitle my-0 active-".concat(A),children:"Vacate Bed"})})})]}),Object(v.jsx)("div",{className:"row",children:u&&Object(v.jsx)(S,{currentBed:s,handleShowNewTask:E,hideBedModal:c})}),Object(v.jsx)("div",{className:"row m-0",children:o&&Object(v.jsx)(f,{currentBed:s})}),Object(v.jsx)("div",{className:"row m-0",children:x&&Object(v.jsx)(g,{currentBed:s,handleShowInfo:P})}),Object(v.jsx)("div",{className:"row m-0",children:C&&Object(v.jsx)(w,{currentBed:s,handleShowInfo:P})}),Object(v.jsx)("div",{className:"row m-0",children:A&&Object(v.jsx)(k,{currentBed:s,hideBedModal:c})}),Object(v.jsx)("hr",{}),Object(v.jsx)("div",{className:"justify-content-center",children:Object(v.jsx)("button",{id:"bed-close",className:"shdw btn m-discard btn-light my-2 p-2",title:"Close",onClick:c,children:"Close Window"})})]})})})})}var D=c.p+"static/media/bed-solid.3c25ef5b.svg";var _=function(e){var t=Object(a.useContext)(r),c=Object(i.a)(t,2),s=c[0],n=(c[1],e.room),l=e.bed,o=Object(a.useState)(!1),d=Object(i.a)(o,2),j=d[0],b=d[1],u=Object(a.useState)({}),m=Object(i.a)(u,2),h=m[0],O=m[1],x={id:"",bed_id:n+","+l,diagnosis:"No Diagnosis",bed_state:"free",bed_active:!1,action_done_by:"Anonymous",image:"",patient:"No Patient"};return Object(a.useEffect)((function(){O(x)}),[]),Object(a.useEffect)((function(){!function(){var e=n+","+l;s.beds.map((function(t){e===t.bed_id&&O(t)}))}()}),[s.beds]),Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("div",{className:"card shdw rounded bed ".concat(h.bed_state),id:"b-"+n+","+l,onClick:function(){b((function(e){return!0}))},title:h.patient,children:[Object(v.jsx)("div",{className:"bed-title text-center px-2",children:l+" "}),Object(v.jsx)("h5",{className:"text-center px-2",children:Object(v.jsx)("img",{src:D,alt:"Bed",className:"bed-avatar"})})]}),j&&Object(v.jsx)(C,{show:j,hideBedModal:function(){b((function(e){return!1}))},currentBed:h})]})},B=(c(22),function(e){var t=Object(a.useContext)(r),c=Object(i.a)(t,2),s=c[0],n=(c[1],e.room),l=e.places,o=Object(a.useState)("room-free"),d=Object(i.a)(o,2),j=d[0],b=d[1];return Object(a.useEffect)((function(){!function(){var e=!1;s.beds.map((function(t){parseInt(t.bed_id.split(",")[0])===n&&(b("room-occupied"),e=!0)})),e||b("room-free")}()}),[s.beds]),Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)("div",{id:"r-"+n,className:"col-2 rounded m-1 shdw",children:[Object(v.jsx)("div",{className:"row justify-content-center shdw rounded ".concat(j),children:Object(v.jsxs)("p",{className:"text-center room-title",children:[" Room ",Object(v.jsx)("b",{children:n})," "]})}),Object(v.jsx)("div",{className:"row justify-content-center",children:function(){for(var e=l.numBeds,t=[],c=1;c<=e;c++)t.push(c);return t}().map((function(e){return Object(v.jsx)(_,{appState:s,room:n,bed:e},"b-".concat(n,",").concat(e))}))})]})})});c(23);function A(e){var t=Object(a.useContext)(r),c=Object(i.a)(t,2),s=c[0],n=(c[1],e.places);return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{className:"sketch row justify-content-center shdw rounded m-1",children:Object(v.jsx)("p",{className:"text-center sketch-title",children:"Rooms Sketch"})}),Object(v.jsx)("div",{className:"row justify-content-center",children:function(){for(var e=n.numRooms,t=[],c=1;c<=e;c++)t.push(c);return t}().map((function(e){return Object(v.jsx)(B,{room:e,appState:s,places:n},"r-".concat(e))}))})]})}c(24),c(25),c(26);var R=c.p+"static/media/patient.5f20d140.svg";var T=function(e){var t=e.hideCallModal,c=e.show,s=e.callEventId,n=e.call,l=e.closeCall,r=c?"modal display-block":"display-none",o=s.split("-")[1].split(","),d=o[0],j=o[1],b=o[2],m=Object(a.useState)(),h=Object(i.a)(m,2),O=h[0],x=h[1],p=Object(a.useState)(""),f=Object(i.a)(p,2),N=f[0],g=f[1],y=Object(a.useState)(),w=Object(i.a)(y,2),k=w[0],S=w[1],C=Object(a.useState)(new Date),D=Object(i.a)(C,2),_=D[0],B=D[1],A=Object(a.useState)(new Date),T=Object(i.a)(A,2),I=T[0],E=T[1];Object(a.useEffect)((function(){x(n),B(u("d-m-y",n.call_time)),E(u("d-m-y",n.response_time))}),[n]);var P=function(e){g(""),S(""),t(),e.preventDefault()};return Object(v.jsx)(v.Fragment,{children:O&&Object(v.jsx)("div",{className:r,children:Object(v.jsx)("section",{className:"modal-call",children:Object(v.jsx)("div",{className:"container",children:"answered"===O.state?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{className:"row justify-content-center call-modal-title",children:Object(v.jsx)("h3",{id:"call-modal-title",className:"text-center text-title",children:Object(v.jsx)("b",{children:"Call Answer"})})}),Object(v.jsxs)("div",{id:"place",className:"row shdw",children:[Object(v.jsxs)("p",{className:"modal-subtitle col text-center",children:["List Position: ",Object(v.jsx)("b",{children:parseInt(b)+1})]}),Object(v.jsxs)("p",{className:"modal-subtitle col text-center",children:["Room: ",Object(v.jsx)("b",{children:d})]}),Object(v.jsxs)("p",{className:"modal-subtitle col text-center",children:["Bed: ",Object(v.jsx)("b",{children:j})]})]}),Object(v.jsxs)("form",{onSubmit:function(e){l(O.id,O.response_time,N,k),g(""),S(""),e.preventDefault()},id:"call-form",className:"form-container",children:[Object(v.jsxs)("div",{className:"row",children:[Object(v.jsxs)("div",{id:"call-time",className:"col time-box shdw",children:[Object(v.jsx)("p",{className:"text-center modal-subtitle",children:"Call"}),Object(v.jsx)("p",{className:"text-center",children:Object(v.jsx)("b",{children:_})}),Object(v.jsx)("p",{className:"text-center",children:Object(v.jsx)("b",{children:n.patient})})]}),Object(v.jsxs)("div",{id:"call-answer",className:"col time-box shdw",children:[Object(v.jsx)("p",{className:"text-center modal-subtitle",children:"Answer"}),Object(v.jsx)("p",{className:"text-center",children:Object(v.jsx)("b",{children:I})}),Object(v.jsx)("p",{className:"justify-content-center row",children:Object(v.jsx)("input",{type:"text",id:"answered-by",name:"answered-by",className:"shdw mb-1",onChange:function(e){return S(e.target.value)},value:k,placeholder:"Answered by"})})]})]}),Object(v.jsx)("div",{className:"justify-content-center row",children:Object(v.jsxs)("label",{className:"modal-subtitle col text-center mt-1",children:[Object(v.jsx)("b",{children:"Response"}),Object(v.jsx)("textarea",{onChange:function(e){return g(e.target.value)},value:N,id:"answer-text",className:"text-box shdw",placeholder:"Uneventfully response (deafult)",name:"answer-call",maxlength:"1000"})]})}),Object(v.jsx)("div",{id:"new-form-buttons",className:"row",children:Object(v.jsx)("div",{id:"new-edit-buttons",className:"col",children:Object(v.jsx)("input",{type:"submit",value:"Save and Colse",id:"answer-call-send",className:"shdw save btn m-2 float-right",title:"Send"})})})]}),Object(v.jsx)("button",{type:"button",id:"answer-close",className:"shdw discard btn m-2 float-right",title:"Discard",onClick:P,children:"Discard Changes"})]}):Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{className:"row justify-content-center call-modal-title",children:Object(v.jsx)("h3",{id:"call-modal-title",className:"text-center text-title",children:Object(v.jsx)("b",{children:"Call"})})}),Object(v.jsxs)("div",{id:"place",className:"row shdw",children:[Object(v.jsxs)("p",{className:"modal-subtitle col text-center",children:["List Position: ",Object(v.jsx)("b",{children:parseInt(b)+1})]}),Object(v.jsxs)("p",{className:"modal-subtitle col text-center",children:["Room: ",Object(v.jsx)("b",{children:d})]}),Object(v.jsxs)("p",{className:"modal-subtitle col text-center",children:["Bed: ",Object(v.jsx)("b",{children:j})]})]}),Object(v.jsxs)("div",{className:"row",children:[Object(v.jsxs)("div",{id:"call-time",className:"col time-box shdw",children:[Object(v.jsx)("p",{className:"text-center modal-subtitle",children:"Call"}),Object(v.jsx)("p",{className:"text-center",children:Object(v.jsx)("b",{children:_})})]}),Object(v.jsxs)("div",{id:"call-answer",className:"col shdw",children:[Object(v.jsx)("img",{src:R,alt:"Avatar",height:"50",className:"avatar"}),Object(v.jsx)("div",{children:Object(v.jsx)("a",{href:"https://www.flaticon.es/",children:" "})}),Object(v.jsx)("p",{className:"text-center",children:Object(v.jsx)("b",{children:n.patient})})]})]}),Object(v.jsx)("button",{type:"button",id:"answer-close",className:"shdw discard btn m-2 float-right",title:"Close",onClick:P,children:"Close"})]})})})})})},I=c.p+"static/media/bed-solid-white.5facbb7b.svg",E=c.p+"static/media/call-tone.d7aa675a.mp3",P=c(5);function F(e){var t=e.call,c=e.callBedAndIndex,s=t.bed.split(","),n=s[0],l=s[1],o=Object(a.useContext)(r),b=Object(i.a)(o,2),u=b[0],m=b[1],h=Object(a.useState)(!1),O=Object(i.a)(h,2),x=O[0],p=O[1],f=Object(a.useState)(""),N=Object(i.a)(f,2),g=N[0],y=N[1],w=new P.Howl({src:[E]});Object(a.useEffect)((function(){var e=setInterval((function(){k(e)}),15e3);return function(){clearInterval(e)}}),[t.state]);var k=function(e){"active"===t.state?w.play():(w.stop(),clearInterval(e))},S=function(e){y((function(t){return e.target.id?e.target.id:e.target.offsetParent.id})),p((function(e){return!0}))},C=function(){p((function(e){return!1}))},D=function(){var e=Object(j.a)(d.a.mark((function e(t,c,a){var s,n,l,i,r=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=r.length>3&&void 0!==r[3]?r[3]:"Anonymous",n=t,l=c,i=""===a?"Uneventfully response":a,e.next=6,fetch("http://localhost:8000/nursing/close_call",{method:"POST",headers:{"Access-Control-Allow-Origin":"*",crossorigin:"anonymous","Cache-Control":"no-cache"},body:JSON.stringify({callId:n,callTime:l,text:i,answeredBy:s})}).then((function(e){return e.json()})).then((function(e){m(e)})).catch((function(e){console.log("An ERROR occurred while save the Closed Call: ".concat(e))}));case 6:case"end":return e.stop()}}),e)})));return function(t,c,a){return e.apply(this,arguments)}}();return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("div",{id:"c-"+c,onClick:S,title:function(){var e="",c=t.bed;return u.beds.map((function(t){return t.bed_id===c&&(e=t.patient),e})),e}(),className:"animate__animated animate__fadeInUp card text-center call shdw rounded my-1 ".concat(t.state),children:[Object(v.jsx)("div",{className:"card-hearder call-row py-1",onClick:S,children:Object(v.jsxs)("p",{className:"call-bed",children:[" Room ",Object(v.jsx)("b",{children:n})," "]})}),Object(v.jsx)("div",{className:"card-title call-row py-1",onClick:S,children:Object(v.jsxs)("p",{className:"call-bed",children:[" ",Object(v.jsx)("b",{children:l+" "}),Object(v.jsx)("img",{id:"call-bed-avatar-".concat(l),src:I,alt:"Bed Avatar",className:"call-bed-avatar",onClick:S})]})})]}),Object(v.jsx)("div",{children:x&&Object(v.jsx)(T,{show:x,hideCallModal:C,callEventId:g,call:t,closeCall:function(e,t,c,a){C(),D(e,t,c,a)}},"CM-3")})]})}function M(e){var t=Object(a.useContext)(r),c=Object(i.a)(t,2),s=c[0],n=c[1],l=Object(a.useState)(s.calls.length),o=Object(i.a)(l,2),b=o[0],u=o[1],m=e.places,h=new(window.AudioContext||window.webkitAudioContext),O=new P.Howl({src:[E]});Object(a.useEffect)((function(){return function(e){var t=e.handleCall,c=new WebSocket("ws://127.0.0.1:8000/ws/callData/");c.onopen=function(){console.log("Calls contected")},c.onmessage=function(e){var c=JSON.parse(e.data);t(c)},c.onerror=function(e){console.log(e)},c.onclose=function(e){console.log("Calls closed"),console.log(e)}}({handleCall:x}),"suspended"===h.state&&h.resume(),function(){h.suspend()}}),[]),Object(a.useEffect)((function(){u(s.calls.length)}),[s.calls.length]);var x=function(e){e.state?e.call?(n(e.call),u(e.call.calls.length),O.play()):console.log("Repeated Call or Unoccupied Bed"):(n(e.call),u(e.call.calls.length),p(e))},p=function(e){var t=e.call.calls,c=m.numBeds,a=[];if(t.length>0){for(var s=function(c){var s="".concat(e.bed,",").concat(c);t.map((function(e){e.bed===s&&"active"===e.state&&(e.state="answered",e.response_time=new Date,a.push(e))}))},n=1;n<=c;n++)s(n);f(a)}else console.log("No calls to answered")},f=function(){var e=Object(j.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.length>0)){e.next=3;break}return e.next=3,fetch("http://localhost:8000/nursing/answered_call",{method:"POST",headers:{"Access-Control-Allow-Origin":"*",crossorigin:"anonymous","Cache-Control":"no-cache"},body:JSON.stringify({saveCallsList:t})}).then((function(e){return e.json()})).then((function(e){n(e)})).catch((function(e){console.log("An ERROR occurred while save the Answered Call: ".concat(e))}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{className:"call-title row justify-content-center shdw rounded my-2",children:Object(v.jsx)("p",{className:"call-title-text",children:"Calls"})}),Object(v.jsx)("div",{className:"calls-col",children:b>0&&s.calls.map((function(e,t){return Object(v.jsx)(F,{call:e,callBedAndIndex:"".concat(e.bed,",").concat(t)},"".concat(e.bed,",").concat(t))}))})]})}var J=c(8);c(28);var L=function(e){var t=e.hideTaskModal,c=e.show,s=e.task,n=c?"modal display-block":"display-none",l=e.taskBedAndIndex.split(","),o=l[0],d=l[1],j=l[2],b=Object(a.useState)(s.task),u=Object(i.a)(b,2),O=u[0],x=u[1],p=Object(a.useState)(),f=Object(i.a)(p,2),N=f[0],g=f[1],y=Object(a.useState)(),w=Object(i.a)(y,2),k=w[0],S=w[1],C=Object(a.useState)(),D=Object(i.a)(C,2),_=D[0],B=D[1],A=Object(a.useState)(),R=Object(i.a)(A,2),T=R[0],I=R[1],E=Object(a.useState)(s.programed_by),P=Object(i.a)(E,2),F=P[0],M=P[1],J=Object(a.useState)(s.action_done_by),L=Object(i.a)(J,2),U=L[0],V=L[1],W=Object(a.useState)(s.active),H=Object(i.a)(W,2),Y=H[0],q=H[1],z=Object(a.useContext)(r),G=Object(i.a)(z,2),K=(G[0],G[1]),Q=Object(a.useState)(!1),X=Object(i.a)(Q,2),Z=X[0],$=X[1];return Object(a.useEffect)((function(){g(m("y-m-d",s.programed_time)),S(h("h:m",s.programed_time)),B(m("y-m-d",s.done_time)),I(h("h:m",s.done_time)),x((function(e){return s.task}))}),[]),Object(v.jsx)(v.Fragment,{children:Object(v.jsx)("div",{className:n,children:Object(v.jsx)("section",{className:"modal-task",children:Object(v.jsxs)("div",{className:"container",children:[Object(v.jsx)("div",{className:"row justify-content-center task-modal-title",children:Object(v.jsx)("h3",{id:"task-modal-title",className:"text-center text-title",children:Object(v.jsx)("b",{children:"Edit Task"})})}),Object(v.jsxs)("form",{onSubmit:function(e){var c="".concat(N," ").concat(k),a="".concat(_," ").concat(T),n=s.id,l=F,i=U,r=O,j=new Date,b=o+","+d,u=Y,m="soon";Date.parse(a)<Date.parse(j)&&(r="".concat(O,"(Done)"),u=!1),Date.parse(c)-Date.parse(j)>6e5?m="later":Date.parse(c)-Date.parse(j)>0&&Date.parse(c)-Date.parse(j)<18e5?m="soon":Date.parse(c)-Date.parse(j)<0&&(m="passed"),fetch("http://localhost:8000/nursing/edit_task",{method:"PUT",headers:{"Access-Control-Allow-Origin":"*",crossorigin:"anonymous","Cache-Control":"no-cache"},body:JSON.stringify({taskId:n,currentBed:b,programedDT:c,doneDT:a,programer:l,maker:i,textAction:r,state:m,active:u})}).then((function(e){return e.json()})).then((function(e){K(e)})).catch((function(e){console.log("An ERROR occurred while save the Edtited Task, ".concat(e))})),x(""),t(),e.preventDefault()},id:"task-form",className:"form-container",children:[Object(v.jsxs)("div",{id:"task-place",className:"row shdw",children:[Object(v.jsxs)("p",{className:"modal-subtitle col text-center",children:["List Position: ",Object(v.jsx)("b",{children:parseInt(j)+1})]}),Object(v.jsxs)("p",{className:"modal-subtitle col text-center",children:["Room: ",Object(v.jsx)("b",{children:o})]}),Object(v.jsxs)("p",{className:"modal-subtitle col text-center",children:["Bed: ",Object(v.jsx)("b",{children:d})]})]}),Object(v.jsxs)("div",{children:[Object(v.jsx)("p",{className:"modal-subtitle col text-center",children:"Patient"}),Object(v.jsx)("p",{className:"text-center",children:Object(v.jsx)("b",{children:s.patient})})]}),Object(v.jsxs)("div",{className:"row",children:[Object(v.jsxs)("div",{id:"task-programed-time",className:"col time-box shdw",children:[Object(v.jsx)("p",{className:"text-center modal-subtitle",children:"Schedule"}),Object(v.jsx)("p",{className:"task-label",children:"Programed By "}),Object(v.jsx)("input",{type:"text",id:"programed-by",name:"programed-by",className:"tx-box ml-3 mb-1",onChange:function(e){return M(e.target.value)},value:F,placeholder:s.programed_by}),Object(v.jsx)("hr",{}),Object(v.jsx)("input",{type:"date",id:"programed-to",name:"programed-to",className:"t-box mb-1",onChange:function(e){return g(e.target.value)},value:N}),Object(v.jsx)("input",{type:"time",id:"programed",name:"programed",className:"t-box mb-1",onChange:function(e){return S(e.target.value)},value:k})]}),Object(v.jsxs)("div",{id:"task-done-time",className:"col time-box shdw",children:[Object(v.jsx)("p",{className:"text-center modal-subtitle",children:"(Will) Done at"}),Object(v.jsx)("p",{className:"task-label",children:"Done By"}),Object(v.jsx)("input",{disabled:!1,type:"text",id:"done-by",name:"done-by",className:"tx-box ml-3 mb-1",onChange:function(e){return V(e.target.value)},value:U,placeholder:s.action_done_by}),Object(v.jsx)("hr",{}),Object(v.jsx)("input",{disabled:!1,type:"date",id:"done",name:"done",className:"t-box mb-1",onChange:function(e){return B(e.target.value)},value:_}),Object(v.jsx)("input",{disabled:!1,type:"time",id:"done",name:"done",className:"t-box mb-1",onChange:function(e){return I(e.target.value)},value:T})]})]}),Object(v.jsx)("div",{className:"justify-content-center row",children:Object(v.jsxs)("label",{className:"modal-subtitle col text-center",children:[Object(v.jsx)("b",{children:"Action"}),Object(v.jsx)("textarea",{onChange:function(e){return x(e.target.value)},value:O,id:"action-text",className:"text-box shdw",placeholder:s.task,name:"answer-task",maxlength:"1000"})]})}),Object(v.jsxs)("div",{id:"task-form-buttons",className:"row",children:[Object(v.jsxs)("div",{id:"new-edit-button",className:"col ml-3",children:[Object(v.jsx)("button",{onClick:function(){B(m("y-m-d",new Date)),I(h("h:m:s",new Date)),q(!1),x((function(e){return"".concat(e,"(Done)")}))},id:"task-done",className:"shdw done btn m-1",title:"Just Done",children:"Just Done"}),Object(v.jsx)("input",{type:"submit",value:"Save Edited",id:"task-send",className:"shdw save btn m-1",title:"Send"})]}),Object(v.jsxs)("div",{className:"col border border-secondary mt-1 mb-4 mx-4",children:[Object(v.jsx)("button",{onClick:function(e){var c=s.id,a=o+","+d,n=s.repeat_id;fetch("http://localhost:8000/nursing/delete_task",{method:"POST",headers:{"Access-Control-Allow-Origin":"*",crossorigin:"anonymous","Cache-Control":"no-cache"},body:JSON.stringify({taskPk:c,currentBed:a,reapeatTasksId:n,repeatIsChecked:Z})}).then((function(e){return e.json()})).then((function(e){K(e)})).catch((function(e){console.log("An ERROR occurred while delete Task, ".concat(e))})),t(),e.preventDefault()},id:"task-delete",className:"shdw delete btn m-1 float-left",title:"Delete Task",children:"Delete Task"}),Object(v.jsxs)("label",{className:"align-middle mycheck-box",children:[Object(v.jsx)("input",{type:"checkbox",id:"check-repeat",name:"check-repeat",className:"",onChange:function(e){return $(e.target.checked)},checked:Z}),Object(v.jsx)("span",{className:"task-label ml-1",children:" All occurrences"})]})]})]})]}),Object(v.jsx)("button",{type:"button",id:"task-close",className:"shdw discard btn mx-3 mb-2 float-right",title:"Discard",onClick:function(e){x(""),M(""),V(""),t(),e.preventDefault()},children:"Discard Changes"})]})})})})};function U(e){var t=e.task,c=e.taskBedAndIndex,s=t.bed.split(","),n=s[0],l=s[1],r=Object(a.useState)(!1),o=Object(i.a)(r,2),d=o[0],j=o[1],b=m("d-m-y:short",t.programed_time),u=h("h:m",t.programed_time),O=t.repeat?"repeat":"unrepeat",x=function(e){j((function(e){return!0}))};return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("div",{id:"t-"+c,className:"animate__animated animate__fadeInUp card text-center task shdw rounded my-1 ".concat(t.state),title:t.task,onClick:x,children:[Object(v.jsx)("div",{className:"card-hearder task-row py-1",onClick:x,children:Object(v.jsxs)("p",{className:"task-card-title",children:[" Room ",Object(v.jsx)("b",{children:n})," "]})}),Object(v.jsx)("div",{className:"card-title task-row py-1",onClick:x,children:Object(v.jsxs)("p",{className:"task-bed",children:[" ",Object(v.jsx)("b",{children:l+" "}),Object(v.jsx)("img",{id:"task-bed-avatar-".concat(l),src:I,alt:"Bed Avatar",className:"task-bed-avatar ".concat(O),onClick:x})]})}),Object(v.jsx)("div",{className:"card-title task-row my-0",onClick:x,children:Object(v.jsxs)("p",{children:[Object(v.jsx)("span",{className:"date",children:b})," ",Object(v.jsx)("b",{className:"task-hours-".concat(t.state," ml-1"),children:u})]})})]}),Object(v.jsx)("div",{children:d&&Object(v.jsx)(L,{show:d,task:t,hideTaskModal:function(){j((function(e){return!1}))},taskBedAndIndex:c},1)})]})}c(29);var V=c.p+"static/media/call-bell.77a04d4b.mp3";var W=function(e){var t=e.places,c=Object(a.useContext)(r),s=Object(i.a)(c,2),n=s[0],l=s[1],o=n.tasks||[],d=Object(a.useState)(n.tasks),j=Object(i.a)(d,2),b=j[0],u=j[1],m=Object(a.useState)(n.beds),h=Object(i.a)(m,2),O=h[0],x=h[1],p=Object(a.useState)(!0),f=Object(i.a)(p,2),N=f[0],g=f[1],y=new P.Howl({src:[V]});Object(a.useEffect)((function(){!function(e){var t=e.handleTasks,c=new WebSocket("ws://127.0.0.1:8000/ws/taskData/");c.onopen=function(){console.log("Tasks contected")},c.onmessage=function(e){var c=JSON.parse(e.data);t(c)},c.onerror=function(e){console.log(e)},c.onclose=function(e){console.log("Tasks closed"),console.log(e)}}({handleTasks:w})}),[]),Object(a.useEffect)((function(){l(Object(J.a)(Object(J.a)({},n),{},{tasks:b,beds:O})),k()}),[O,b]);var w=function(e){u(e.tasks_list),x(e.beds_list)},k=function(){g(!1);var e=!1;o.map((function(t){return"passed"===t.state&&(e=!0),e})),e&&y.play()};return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{id:"tasks-head",className:"row task-title justify-content-center shdw rounded my-2",children:Object(v.jsx)("p",{id:"tasks-title",className:"task-title-text",children:"Tasks"})}),N&&Object(v.jsx)("button",{onClick:k,children:"Active sound"}),Object(v.jsx)("div",{className:"tasks-col",children:o.length>0&&o.map((function(e,c){var a="".concat(e.bed,",").concat(c);return Object(v.jsx)(U,{task:e,taskBedAndIndex:a,places:t},a)}))})]})};var H=function(){var e=Object(a.useContext)(r),t=Object(i.a)(e,2),c=t[0],s=t[1],n={numBeds:4,numRooms:30};Object(a.useEffect)((function(){b().then((function(e){console.log({initialData:e})})),function(e){var t=e.handleApp,c=new WebSocket("ws://127.0.0.1:8000/ws/appData/");c.onopen=function(){console.log("App contected")},c.onmessage=function(e){var c=JSON.parse(e.data);t(c)},c.onerror=function(e){console.log(e)},c.onclose=function(e){console.log("App closed"),console.log(e)}}({handleApp:l})}),[]);var l=function(e){e&&s(e)};return Object(v.jsx)(v.Fragment,{children:c?Object(v.jsx)("div",{className:"container justify-content-center w-100",children:Object(v.jsxs)("div",{className:"row",children:[Object(v.jsx)("div",{className:"col-2",children:Object(v.jsx)(W,{places:n},"tasksComponent")}),Object(v.jsx)("div",{className:"col-8",children:Object(v.jsx)(A,{places:n},"sketchComponent")}),Object(v.jsx)("div",{className:"col-2",children:Object(v.jsx)(M,{places:n},"callsComponent")})]})}):Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("p",{className:"bg-info text-white loading-text",children:"Loading ... "}),Object(v.jsx)("p",{className:"bg-info text-white loading-text",children:"Please wait a moment."}),Object(v.jsx)("p",{className:"bg-secondary text-white loading-text",children:"If this takes too long then you can press F5"})]})})};var Y=function(){var e=Object(a.useState)(),t=Object(i.a)(e,2),c=t[0],s=t[1];return Object(v.jsx)(r.Provider,{value:[c,s],children:Object(v.jsx)(H,{})})},q=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,31)).then((function(t){var c=t.getCLS,a=t.getFID,s=t.getFCP,n=t.getLCP,l=t.getTTFB;c(e),a(e),s(e),n(e),l(e)}))};l.a.render(Object(v.jsx)(s.a.StrictMode,{children:Object(v.jsx)(Y,{})}),document.getElementById("root")),q()}],[[30,1,2]]]);
//# sourceMappingURL=main.44576342.chunk.js.map